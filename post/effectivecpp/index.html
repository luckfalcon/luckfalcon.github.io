<!doctype html>
<html lang="en-us">
  <head>
    <title>My // My New Hugo Site</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.118.2">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.3c3c186cd62e563ad6e2f00a89dbee656ab912d1d46f856b5605dd0232521e2a.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="My"/>
<meta name="twitter:description" content="luckfalcon�Ĳ��� C&#43;&#43;����ע������ �������캯�� &mdash; ��ʼ�� &mdash;&ndash;A(B)&mdash; ֻ�����ڶ��󴴽�ʱ ������ֵ������ &ndash; ͬ���Ͷ���ֵ��ֵ���������� &ndash;A=B ֵ���ݣ�pass-by-value��&ndash; ���ù��캯�� ���ô��� (passed-by-reference) &ndash; �����ù��캯�� C&#43;&#43;�Ĵ��μ�����
c ���Բ��ֱ��� class ������ template ģ������ STL ��׼������ ����2�������� const��enum��inline �滻 #define #define û������������Ҳ������ͼ��飬�����Ǳ����滻 (����������ǰ��׺������ʽ����)�� #define max(a,b) f((a) &gt; (b)? (a) : (b)) int a = 5,b = 0; max(&#43;&#43;a, b);	//a���ۼ�2�� max(&#43;&#43;a, b&#43;10);	//a���ۼ�1�� enum hack (ö��hack) ��������ʼ������������С����ģ��Ԫ���̵Ļ��������� class Test {	static const int num = 1;//�˴���Ϊ�������Ƕ��� int arr[num]; }; const int num;//�˴�Ϊ����,����ʵ���ļ��ж���ͷ�ļ��� enum{num = 5}//�ɴ����� static const int class Test { private: enum {arr_size = 10};//�ڱ�������֧�ֱ����ڼ�����static��ֵʱ(������������) static const int arr[arr_size]; }; С��"/>

    <meta property="og:title" content="My" />
<meta property="og:description" content="luckfalcon�Ĳ��� C&#43;&#43;����ע������ �������캯�� &mdash; ��ʼ�� &mdash;&ndash;A(B)&mdash; ֻ�����ڶ��󴴽�ʱ ������ֵ������ &ndash; ͬ���Ͷ���ֵ��ֵ���������� &ndash;A=B ֵ���ݣ�pass-by-value��&ndash; ���ù��캯�� ���ô��� (passed-by-reference) &ndash; �����ù��캯�� C&#43;&#43;�Ĵ��μ�����
c ���Բ��ֱ��� class ������ template ģ������ STL ��׼������ ����2�������� const��enum��inline �滻 #define #define û������������Ҳ������ͼ��飬�����Ǳ����滻 (����������ǰ��׺������ʽ����)�� #define max(a,b) f((a) &gt; (b)? (a) : (b)) int a = 5,b = 0; max(&#43;&#43;a, b);	//a���ۼ�2�� max(&#43;&#43;a, b&#43;10);	//a���ۼ�1�� enum hack (ö��hack) ��������ʼ������������С����ģ��Ԫ���̵Ļ��������� class Test {	static const int num = 1;//�˴���Ϊ�������Ƕ��� int arr[num]; }; const int num;//�˴�Ϊ����,����ʵ���ļ��ж���ͷ�ļ��� enum{num = 5}//�ɴ����� static const int class Test { private: enum {arr_size = 10};//�ڱ�������֧�ֱ����ڼ�����static��ֵʱ(������������) static const int arr[arr_size]; }; С��" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://luckfalcon.github.io/post/effectivecpp/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-10-23T01:41:54+08:00" />
<meta property="article:modified_time" content="2023-10-23T01:41:54+08:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://luckfalcon.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="John Doe" /></a>
      <span class="app-header-title">My New Hugo Site</span>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc vehicula turpis sit amet elit pretium.</p>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">My</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Oct 23, 2023
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          14 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <p><a href="http://luckfalcon.github.io">luckfalconĲ</a>
<img src="" alt="test"></p>
<h1 id="cע">C++ע</h1>
<ul>
<li>캯 &mdash; ʼ &mdash;&ndash;A(B)&mdash; ֻڶ󴴽ʱ</li>
<li>ֵ &ndash; ͬͶֵֵ &ndash;A=B</li>
<li>ֵݣpass-by-value&ndash; ù캯</li>
<li>ô (passed-by-reference) &ndash; ù캯</li>
</ul>
<p>C++Ĵμ</p>
<ul>
<li>c Բֱ</li>
</ul>
<hr>
<ul>
<li>class </li>
</ul>
<hr>
<ul>
<li>template ģ</li>
</ul>
<hr>
<ul>
<li>STL ׼</li>
</ul>
<hr>
<h2 id="2-constenuminline-滻-define">2 constenuminline 滻 #define</h2>
<ul>
<li>#define ûҲͼ飬Ǳ滻 (ǰ׺ʽ)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#define max(a,b) f((a) &gt; (b)? (a) : (b))
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>,b <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">max</span>(<span style="color:#f92672">++</span>a, b);	<span style="color:#75715e">//a���ۼ�2��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">max</span>(<span style="color:#f92672">++</span>a, b<span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>);	<span style="color:#75715e">//a���ۼ�1��
</span></span></span></code></pre></div><ul>
<li>enum hack (öhack) ʼСģԪ̵Ļ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span>
</span></span><span style="display:flex;"><span>{	
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> num <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;<span style="color:#75715e">//�˴���Ϊ�������Ƕ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> arr[num];
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> num;<span style="color:#75715e">//�˴�Ϊ����,����ʵ���ļ��ж���ͷ�ļ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">enum</span>{num <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>}<span style="color:#75715e">//�ɴ����� static const int 
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">enum</span> {arr_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>};<span style="color:#75715e">//�ڱ�������֧�ֱ����ڼ�����static��ֵʱ(������������)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> arr[arr_size];
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>const 滻 define </li>
<li>inline 滻 define ƺ</li>
</ul>
<h2 id="3ʹ-const">3ʹ const</h2>
<ul>
<li>һֵԽͿͻⷢڷȫԺ͸Ч</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">//������operator*
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rational</span>{}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> Rational <span style="color:#66d9ef">operator</span><span style="color:#f92672">*</span>(<span style="color:#66d9ef">const</span> Rational <span style="color:#f92672">&amp;</span>lhs,<span style="color:#66d9ef">const</span> Rational <span style="color:#f92672">&amp;</span>rhs);
</span></span><span style="display:flex;"><span><span style="color:#75715e">//���Ա����ͻ�������Ϊ��:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Rational a,b,c;
</span></span><span style="display:flex;"><span>(a <span style="color:#f92672">*</span> b) <span style="color:#f92672">=</span> c;<span style="color:#75715e">//��a*b�Ľ����ϵ��ø�ֵ������operator =
</span></span></span></code></pre></div><ul>
<li>const Աȷ const ɱ</li>
<li>ķͣĶֵǷǷ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">text</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">const</span> <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">char</span> <span style="color:#66d9ef">operator</span>[](std<span style="color:#f92672">::</span>size_t position)<span style="color:#66d9ef">const</span><span style="color:#75715e">//����const���󣬲����޸Ķ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	{<span style="color:#66d9ef">return</span> st[position];}
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&amp;</span><span style="color:#66d9ef">char</span> <span style="color:#66d9ef">operator</span>[](std<span style="color:#f92672">::</span>size_t position)<span style="color:#75715e">//������const����,���޸Ķ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	{<span style="color:#66d9ef">return</span> st[position];}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	std<span style="color:#f92672">::</span>string st;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li>ԱΪ mutable ͣʵ const ޸Ķֵȫ const  non-const ȫ⡣</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Text</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	std<span style="color:#f92672">::</span>size_t length()<span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>ptex;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">mutable</span> std<span style="color:#f92672">::</span>size_t textlength;<span style="color:#75715e">//��Щ�������Ա��޸ģ���ʹ��const�����ڲ�
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">mutable</span> <span style="color:#66d9ef">bool</span> LengthIsValid;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>std<span style="color:#f92672">::</span>size_t Text<span style="color:#f92672">::</span> length()<span style="color:#66d9ef">const</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span>LengthIsValid)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		textlength <span style="color:#f92672">=</span> strlen(ptex);
</span></span><span style="display:flex;"><span>		LengthIsValid <span style="color:#f92672">=</span> true;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> textlength;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li> const  non-const Աбظʹã non-const  const İ汾ʵ֡</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">char</span> <span style="color:#66d9ef">operator</span>[](std<span style="color:#f92672">::</span>size_t position)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> 
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">const_cast</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">char</span> <span style="color:#f92672">&amp;&gt;</span>(		<span style="color:#75715e">//��op[]����ֵȥ��const
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">static_cast</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">const</span> text <span style="color:#f92672">&amp;&gt;</span>(<span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>)<span style="color:#75715e">//Ϊthis����const������const op[]
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		)<span style="color:#75715e">//������this��const���������޵ݹ��Լ�
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ĳЩΪ const ԰÷const ԱκڵĶ󡢺͡Ա</li>
<li>ǿ bitwise constness (λ)ʱӦʹ &ldquo;ϵĳ&rdquo; (conceptual constness)</li>
<li> const  non-const еȼ۵ʵʱ non-const 汾 const 汾ɱظ</li>
</ul>
<h2 id="4ȷʹǰȱʼ">4ȷʹǰȱʼ</h2>
<ul>
<li>δʼɵδΪ (undefined behavior)յ³</li>
<li>Զڶʹ֮ǰʼֱӳʼ乹캯ɳʼ(Աʼڹ캯֮ǰ캯ΪֵʼԱӦʹԱʼб)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Obj(<span style="color:#66d9ef">int</span> i_nit,<span style="color:#66d9ef">char</span> c_init,<span style="color:#66d9ef">const</span> string <span style="color:#f92672">&amp;</span>s_init)
</span></span><span style="display:flex;"><span>		<span style="color:#f92672">:</span>i(i_nit),c(c_init),s(s_init){}<span style="color:#75715e">//��ʼ����ͨ��Ч�ʸ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	Obj(<span style="color:#66d9ef">int</span> i_nit,<span style="color:#66d9ef">char</span> c_init,<span style="color:#66d9ef">const</span> string <span style="color:#f92672">&amp;</span>s_init)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		i <span style="color:#f92672">=</span> i_nit;<span style="color:#75715e">//��ֵ�����ȵ���default���캯�����ٽ��п�����ֵ=
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		c <span style="color:#f92672">=</span> c_init;
</span></span><span style="display:flex;"><span>		s <span style="color:#f92672">=</span> s_init;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> i;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">char</span> c;
</span></span><span style="display:flex;"><span>	string s;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><ul>
<li>c++&quot;ڲͬ뵥Ԫڵ non-local static &quot;ĳʼ****ȷ塣ͨǣÿ non-local static ᵽԼר(öڴ˺ڱΪ static)Щһ reference ָĶûЩ static ãֱʹ static </li>
</ul>
<blockquote>
<p>뵥Ԫ (translation unit) ָһĿļ (sigle object file) Դ롣ǵһԴļͷļ (#include file)</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Ob1</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Ob1 <span style="color:#f92672">&amp;</span>obj()<span style="color:#75715e">//�����ⶨ��Ϊ��������
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">static</span> Ob1 ob;
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> ob;<span style="color:#75715e">//ָ��static������reference��������ʹ��static��������
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	}
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ֶʼ</li>
<li>캯ʹóԱĳʼбʼǹ캯ڽиֵԱʼͬ</li>
<li>Ϊ&quot;뵥Ԫʼ&quot;⣬ local static 滻 non-local static </li>
</ul>
<h2 id="5cĭĭдщ">5˽c++ĬĬдЩ</h2>
<ul>
<li>࣬Ĭһʵε default 캯һʵο캯һֵһ</li>
<li>ûԶ幹캯default 캯ָṩ</li>
<li>ڳԱΪõ࣬Ĭϲɿֵ(ԭ c++ıõĶ)</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>԰Ϊ class  default 캯copy 캯copy assighnment Լ</li>
</ul>
<h2 id="6ʹñզɵĺȷ">6ʹñԶɵĺ͸ȷܾ</h2>
<ul>
<li>ΪֹĿֵΪ̳ͨһĿƲ private ʵ֡</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Uncopy</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Uncopy();
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~</span>Uncopy();<span style="color:#75715e">//���ڷ��麯�������������ؼ̳е�����
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Uncopy(<span style="color:#66d9ef">const</span> Uncopy<span style="color:#f92672">&amp;</span>);
</span></span><span style="display:flex;"><span>	Uncopy <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">operator</span> <span style="color:#f92672">=</span> (<span style="color:#66d9ef">const</span> Uncopy<span style="color:#f92672">&amp;</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span><span style="color:#f92672">:</span><span style="color:#66d9ef">private</span> Uncopy{};<span style="color:#75715e">//��ʱclass Obj��������copy������copy assighnment������
</span></span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ΪرԶṩļܣɽӦĳԱΪ private Ҳʵ֣ uncopy </li>
</ul>
<h2 id="7ϊvirtual">7Ϊ̬virtual</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Base</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Base();
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">virtual</span> <span style="color:#a6e22e">function</span>();<span style="color:#75715e">//��������Ա������������Ҫ����������
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">virtual</span> <span style="color:#f92672">~</span>Base();<span style="color:#75715e">//������������Ϊ�麯��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DerivedA</span><span style="color:#f92672">:</span><span style="color:#66d9ef">public</span> Base{};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DerivedB</span><span style="color:#f92672">:</span><span style="color:#66d9ef">protected</span> Base{};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DerivedC</span> <span style="color:#f92672">:</span><span style="color:#66d9ef">private</span> Base{};
</span></span></code></pre></div><ul>
<li>ÿ virtual  class һӦ vtbl(virtual table)ʱ vptr(virtual table pointer) ָӶʵִ virtual  virtual Ϊ virtual ӰĿֲԡ</li>
<li> virtual ʱҪʹûָָ࣬ٻָʱ޷Ӷڴй©</li>
<li>pure virtual Ϊ࣬޷ʵֻʺࡣ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">virtual</span> <span style="color:#f92672">~</span>Obj() <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;<span style="color:#75715e">//���麯��,����Ϊ�����࣬�޷�ʵ������ֻ�ʺ�������
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span><span style="display:flex;"><span>Obj<span style="color:#f92672">::~</span>Obj(){};<span style="color:#75715e">//���麯���Ķ���,�����������壬������������
</span></span></span></code></pre></div><ul>
<li>еĻƶΪ̬;еĻ඼Ҫ virtual </li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>polymorphic (ж̬ʵ) base classesӦһ virtual  class  virtual ôӦ virtual </li>
<li>classes ĿΪ base classes ʹã߲Ϊ˾̬߱ (polymorphically) ͲӦ virtual </li>
</ul>
<h2 id="8쳣">8쳣</h2>
<ul>
<li>c++ϣ׳쳣(ᵼһЩڶ쳣²ȷΪ)</li>
<li>תӸͻһδ쳣Ļ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> obj create();<span style="color:#75715e">//����һ��obj����
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">closed</span>();<span style="color:#75715e">//�رգ�ʧ�ܻ��׳��쳣
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Manageobj</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> closed()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		closed();<span style="color:#75715e">//�����������׳��쳣�ɹ��û�ѡ������,�������������ڣ��û��޷�������ֻ��ѡ����ֹ���ߺ����쳣
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		closed <span style="color:#f92672">=</span> true;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">~</span>Manageobj()
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span>closed)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">try</span>
</span></span><span style="display:flex;"><span>			{
</span></span><span style="display:flex;"><span>				closed();
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">catch</span>()
</span></span><span style="display:flex;"><span>			{
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">//��¼close����ʧ��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			};
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Obj oj;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">bool</span> closed;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ԲҪ׳쳣һõĺ׳쳣Ӧò׽κ쳣Ȼ(ֹ)</li>
<li>ͻҪĳڼ׳쳣Ӧô class Ӧṩһͨĺ()ִиò</li>
</ul>
<h2 id="9ڹеvirtual">9ڹеvirtual</h2>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ڹڼ䲻Ҫ virtual ΪôӲ½ derived class (ǰִй캯ǲ)</li>
</ul>
<h2 id="10operator--һreference-to-this">10operator = һreference to *this</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Obj <span style="color:#f92672">&amp;</span><span style="color:#66d9ef">operator</span> <span style="color:#f92672">=</span> (<span style="color:#66d9ef">const</span> Obj<span style="color:#f92672">&amp;</span>rhs)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>	}<span style="color:#75715e">//Ϊ��ʵ�� x = y = z = Value;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ֵ(assignment)һreference to *this</li>
</ul>
<h2 id="11-operator--дҹ">11 operator = дҸֵ</h2>
<ul>
<li> operator = ߱&quot;쳣ȫ&quot;ͬʱҲ&quot;Ҹֵȫ&quot;</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Op</span>{};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Op <span style="color:#f92672">*</span>ptr; <span style="color:#75715e">//����Ա����ָ��������
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span><span style="display:flex;"><span>Obj <span style="color:#f92672">&amp;</span>Obj<span style="color:#f92672">::</span><span style="color:#66d9ef">operator</span> <span style="color:#f92672">=</span> (<span style="color:#66d9ef">const</span> Obj <span style="color:#f92672">&amp;</span>rhs)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Op <span style="color:#f92672">*</span>p <span style="color:#f92672">=</span> ptr;		<span style="color:#75715e">//��סԭ�ȵ�ptr
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	ptr <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Op(rhs.ptr);<span style="color:#75715e">//��ptrָ��*ptr��һ������
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">delete</span> p;			<span style="color:#75715e">//ɾ��ԭ�ȵ�ptr
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>ƽ (copy and swap) Ϊ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Op</span>{};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> swap(Obj <span style="color:#f92672">&amp;</span>rhs);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Op <span style="color:#f92672">*</span>ptr; <span style="color:#75715e">//����Ա����ָ��������
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span><span style="display:flex;"><span>Obj <span style="color:#f92672">&amp;</span>Obj<span style="color:#f92672">::</span><span style="color:#66d9ef">operator</span> <span style="color:#f92672">=</span> (<span style="color:#66d9ef">const</span> Obj <span style="color:#f92672">&amp;</span>rhs)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Op <span style="color:#a6e22e">temp</span>(rhs);<span style="color:#75715e">//��rhs��������һ�ݸ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	swap(temp);<span style="color:#75715e">//��*this���ݺ��������������ݽ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//ֵ����(passed by value)--��ʱ���������������ɸ�Ч�Ĵ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>Obj <span style="color:#f92672">&amp;</span>Obj<span style="color:#f92672">::</span><span style="color:#66d9ef">operator</span> <span style="color:#f92672">=</span> (Obj rhs)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	swap(ths);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">this</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ȷҸֵʱ perator = õΪеļȽ&quot;Դ&quot;&quot;Ŀ&quot;ĵַܵ˳ѰԼ copy-and-swap</li>
<li>ȷκκβһϵĶ󣬶жͬһʱΪȻȷ</li>
</ul>
<h2 id="12ƶʱÿһɷ">12ƶʱÿһɷ</h2>
<ul>
<li>derived class  base class ɷ derived class Ĺ캯Ӧ base class Ĺ캯ɡ</li>
<li>Ӧ copy assignment  copy 캯֮Ҳͬû塣</li>
<li> copy assignment  copy 캯ͬظĴ룬ͨ private һ init ִͬȥ</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li><em><strong>copy</strong></em> (copy assignment  copy 캯ͳ) Ӧȷ&quot;ڵгԱ&quot;&ldquo; base class ɷ&rdquo;</li>
<li>Ҫĳ copy ʵһ copy ӦýܷͬŽУ copy ͬá</li>
</ul>
<h2 id="13զդ">13ԶԴ</h2>
<ul>
<li>ȡԴŽڣȷԴͷšԶԴΪԴȡʱǳʼʱ (Resource Acquisition Is Initialization,<em><strong>RAII</strong></em>)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	Obj <span style="color:#f92672">*</span>create();
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">f</span>()
</span></span><span style="display:flex;"><span>{		<span style="color:#75715e">//c++11���Ѿ�����auto_ptr,��unique_ptr����
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//��������ǰ���Ǿ���û��һ�����ϵ�auto_ptrͬʱָ���ö���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	std<span style="color:#f92672">::</span>auto_ptr<span style="color:#f92672">&lt;</span>Obj<span style="color:#f92672">&gt;</span>p_Obj(create());<span style="color:#75715e">//auto_ptrΪһ����ָ������ģ��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><ul>
<li>auto_ptrs һʣͨ (copy assignment  copy 캯ǣǻ nullõָ뽫ȡԴΨһӵȨ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	std<span style="color:#f92672">::</span>auto_ptr1<span style="color:#f92672">&lt;</span>Obj<span style="color:#f92672">&gt;</span>p_Obj(create());<span style="color:#75715e">//ptr1ָ��create���ض���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	std<span style="color:#f92672">::</span>auto_ptr2(ptr1);		<span style="color:#75715e">//ptr2ָ���ö�����ptr1����Ϊnull
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	ptr1 <span style="color:#f92672">=</span> ptr2;			<span style="color:#75715e">//ptr1ָ���ö�����ptr2����Ϊnull
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><ul>
<li>˷ auto_ptr ı׶ˣüָ (reference-counting smart pointer,RCSP) shared_ptr</li>
<li>û &ldquo;c++̬&rdquo; ָ룬Ϊ vector  string ȫ涯̬顣</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ΪֹԴй¶ʹRAIIڹ캯лȡԴͷԴ</li>
<li>õ RAII classes ֱ tr1::shared_ptr  auto_ptr(c++11 unique_ptr)ǰͨѡΪ copy ΪȽֱۡѡ auto_ptrƶʹ () ָ null</li>
</ul>
<h2 id="14դсcopingϊ">14ԴСcopingΪ</h2>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>RAIIһԴԴcopyingΪ (ͨҪ)  RAII  copying Ϊ</li>
<li>ͨ RAII class copying Ϊ copying( shared_ptr) ʩü (reference counting)ΪҲʵ֡</li>
</ul>
<h2 id="15դṩԭʼդķ">15ԴṩԭʼԴķ</h2>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>APIs ҪԭʼԴ (raw resources)ÿ RAII class Ӧṩһ&quot;ȡ֮Դ&quot;İ취</li>
<li>ԭʼԴķʿܾʾתʽתһʾתȽϰȫʽתԿͻȽϷ㡣</li>
</ul>
<h2 id="16ɶʹnewdeleteʱҫʽ">16ɶʹnewdeleteʱҪͬʽ</h2>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>new ʽʹ []Ӧ delete ʽҲʹ[]new ʽвʹ []һҪӦ delete ʽʹ []</li>
</ul>
<h2 id="17զ佫-newed-">17Զ佫 newed ָ</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>{};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">func1</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">func2</span>(shared_ptr<span style="color:#f92672">&lt;</span>obj<span style="color:#f92672">&gt;</span>,<span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span>func2(shared_ptr<span style="color:#f92672">&lt;</span>obj<span style="color:#f92672">&gt;</span>(<span style="color:#66d9ef">new</span> obj),func1());
</span></span><span style="display:flex;"><span><span style="color:#75715e">//�˴�������Ҫ�����������̣�new Obj������shared_ptr��ʼ��ָ�롢����func1,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//������û�й̶�˳������func1������������������֮�䣬�ҷ����쳣�����ᵼ��new Obj����й©
</span></span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>Զ佫 newed ()ָڡһ쳣׳пܵԲԴй©</li>
</ul>
<h2 id="18ýӿױȷʹãױ">18ýӿױȷʹãױ</h2>
<ul>
<li> types Ϊ types һ¡</li>
<li> shared_ptr ýӿߵֹ󲿷Դй©</li>
<li>ָ new ԴʱҪֶһɾ</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>õĽӿںױȷʹãױáӦнӿŬﵽʡ</li>
<li>&ldquo;ٽȡʹ&rdquo;İ취ӿڵһԣԼ͵Ϊݡ</li>
<li>&ldquo;ֹ&rdquo;İ취ǽ͡ϵĲֵԼͻԴΡ</li>
<li>shared_ptr ֶ֧ɾ (custom deleter)ɷֹ DLL (̬ӿ)⣬ɱԶ (mutexes) ȵȡ</li>
</ul>
<blockquote>
<p>ν &ldquo;cross-DLL problem&rdquo;ⷢ&quot;ڶ̬ӳ (DLL) б new ȴһ DLL ڱ delete
&quot;</p>
</blockquote>
<h2 id="19-class--type">19 class  type</h2>
<blockquote>
<p> class ƹ淶⣺</p>
</blockquote>
<ul>
<li>µ type Ӧα٣</li>
<li>ĳʼͶĸֵʲôĲ</li>
<li> type  passed by value (ֵ)ζʲô</li>
<li>ʲô type &quot;Ϸֵ&quot;</li>
<li> type Ҫĳ̳ͼϵ (inheritance graph) </li>
<li> type Ҫʲôת</li>
<li>ʲôĲͺԴ type Ǻģ</li>
<li>ʲôı׼Ӧòأ</li>
<li>˭ȡ type ĳԱ</li>
<li>ʲô type &quot;δӿ&quot;</li>
<li> type жôһ㻯</li>
<li>Ҫһ type </li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>class ƾ type ơڶһtypeʱ뿼⡣</li>
</ul>
<h2 id="20-passed-by-reference-to-const-滻-passed-by-value">20 passed-by-reference-to-const 滻 passed-by-value</h2>
<ul>
<li>ȱʡ C++  by value ʽݶ</li>
<li>һԣpass by value Ψһͺ STL ĵͺ</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li> passed-by-reference-to-const 滻 passed-by-valueǰͨЧɱи (slicing problem)</li>
<li>ϹʺͣԼSTLĵͺ󡣶Ƕѣpassed-by-valueȽʵ</li>
</ul>
<h2 id="21뷵ضʱ뷵reference">21뷵ضʱ뷵reference</h2>
<ul>
<li>һ&quot;뷵¶&quot;ȷд</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rational</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	 Rational(<span style="color:#66d9ef">int</span> numerator <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>,<span style="color:#66d9ef">int</span> denominator <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> n;<span style="color:#75715e">//����(numerator)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> d;<span style="color:#75715e">//��ĸ(denominator)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">friend</span> <span style="color:#66d9ef">const</span> Rational <span style="color:#66d9ef">operator</span><span style="color:#f92672">*</span>(<span style="color:#66d9ef">const</span> Rational <span style="color:#f92672">&amp;</span>lhs,<span style="color:#66d9ef">const</span> Rational <span style="color:#f92672">&amp;</span>rhs)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Rational</span>(lhs.n<span style="color:#f92672">*</span>rhs.n,lhs.d<span style="color:#f92672">*</span>rhs.d);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>Ҫ pointer  reference ָһ local stack 󣬻򷵻 reference ָһ heap-allocated 󣬻򷵻 pointer  reference ָһ local static пͬʱҪĶ</li>
</ul>
<h2 id="22աϊ-private">22ԱΪ private</h2>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>мǽԱΪ privateɸͻݵһԡϸ΢ַʿơŵԼñ֤ṩclassԳֵʵֵԡ</li>
<li>protected  public ߷װԡ</li>
</ul>
<h2 id="23-non-membernon-friend-滻-member-">23 non-membernon-friend 滻 member </h2>
<ul>
<li>бڶͷļڵͬһռ䣬ζſͻչһ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">// class_def.h
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">namespace</span> name
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span> 
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> fun1();
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fun2</span>();
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fun3</span>();
</span></span><span style="display:flex;"><span>	}<span style="color:#960050;background-color:#1e0010">��</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> do_fun1(Obj <span style="color:#f92672">&amp;</span>oj){oj.fun1();}<span style="color:#75715e">//���Ļ��ܣ������ͻ�����Ҫ��non-member����
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">do_fun3</span>(Obj <span style="color:#f92672">&amp;</span>oj){oj.fun3();}<span style="color:#75715e">//�ǳ�Ա�������Խ�һ������class�ķ�װ��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//fun1_use.h//�ͻ���չͷ�ļ�
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">namespace</span> name
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fun1</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li> non-membernon-friend 滻 member ӷװԡ (packaging flexibility) ͻԡ</li>
</ul>
<h2 id="24вתϊ-non-member-">24вתΪ˲ non-member </h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rational</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	 Rational(<span style="color:#66d9ef">int</span> numerator <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>,<span style="color:#66d9ef">int</span> denominator <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>	 <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">numerator</span>()<span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span>	 <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">denominator</span>()<span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> n;<span style="color:#75715e">//����(numerator)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">int</span> d;<span style="color:#75715e">//��ĸ(denominator)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span><span style="display:flex;"><span><span style="color:#75715e">//�ǳ�Ա��Ԫ����������ʽ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> Rational <span style="color:#66d9ef">operator</span><span style="color:#f92672">*</span>(<span style="color:#66d9ef">const</span> Rational <span style="color:#f92672">&amp;</span>lhs,<span style="color:#66d9ef">const</span> Rational <span style="color:#f92672">&amp;</span>rhs)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Rational</span>(lhs.numerator()<span style="color:#f92672">*</span>rhs.numerator(),lhs.denominator()<span style="color:#f92672">*</span>rhs.denominator());
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ҪΪĳв ( this ָָǸ) תô non-member </li>
</ul>
<h2 id="25дһ쳣-swap-">25дһ׳쳣 swap </h2>
<ul>
<li>е STL ṩһ public swap Ա std::swap ػ汾 (Եǰ)</li>
<li>c++ ֻ class template ƫػ (partially specialize)ܶ function template ƫػ</li>
<li>c++ std ռȫػں templateµ template ȥ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> name_obj
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">void</span> swap(<span style="color:#66d9ef">const</span> Obj <span style="color:#f92672">&amp;</span>b){<span style="color:#66d9ef">using</span> std<span style="color:#f92672">::</span>swap;};
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">swap</span>(Obj<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&amp;</span>a,Obj<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&amp;</span>b){a.swap(b);}<span style="color:#75715e">//�Ϸ�
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">namespace</span> std<span style="color:#75715e">//��std���ػ�
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>{
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> swap<span style="color:#f92672">&lt;</span>Obj<span style="color:#f92672">&gt;</span>(obj <span style="color:#f92672">&amp;</span>a,Obj <span style="color:#f92672">&amp;</span>b){a.swap(b);};<span style="color:#75715e">//������ĳ���࣬�Ϸ�
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//Obj��Ϊ��ģ����ʱ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> swap<span style="color:#f92672">&lt;</span>Obj<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;&gt;</span>(Obj<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&amp;</span>a,Obj<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&amp;</span>b){a.swap(b);}<span style="color:#75715e">//����ģ��ƫ�ػ������󣬲��Ϸ�
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> swap(Obj<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&amp;</span>a,Obj<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&amp;</span>b){a.swap(b);}<span style="color:#75715e">//Ҳ���Ϸ�
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><blockquote>
<p>pimpl  &ldquo;pointer to implementation&rdquo; д</p>
</blockquote>
<ul>
<li>swap İ汾default swap (ʺϲָԱģ)member swapnon-member swapstd::swap ػ档</li>
<li>ȱʡ swap Чʲ (class  template ʹĳ pimpl ַ)·</li>
</ul>
<blockquote>
<ol>
<li>ṩһ public swap ԱЧû͵ֵúӦ׳쳣</li>
<li> class  template ڵռṩһ non-member swap swap Ա</li>
<li>дһ class ( class template)Ϊ class ػ std::swap swap Ա</li>
</ol>
</blockquote>
<ul>
<li>swap һõӦǰ classes(  class templates) ṩǿҵ쳣 (exception-safety) ϡ</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li> std::swap ЧʲʱṩһԱ swap ȷ׳쳣</li>
<li>ṩһ member swapҲṩһ non-member swap ǰߡ class ( template)Ҳػ std::swap</li>
<li> swap ʱӦ std::swap ʹ using ʽȻ swap Ҳκ&quot;ռʸ&quot;</li>
<li>Ϊ&quot;û&quot; std templates ȫػǺõģǧҪ std ڼĳЩ std ȫµĶ</li>
</ul>
<blockquote>
<p>-ʵ (implementations)</p>
</blockquote>
<h2 id="26ӻʽĳʱ">26Ӻʽĳʱ</h2>
<ul>
<li>ĿǼٲҪĶ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Obj</span>{};
</span></span><span style="display:flex;"><span>Obj oj;	<span style="color:#75715e">//A��1�ι���+1������+n�θ�ֵ				
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i;i <span style="color:#f92672">&lt;</span> n;<span style="color:#f92672">++</span>i)	
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	oj <span style="color:#f92672">=</span> i;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i;i <span style="color:#f92672">&lt;</span> n;<span style="color:#f92672">++</span>i)	
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Obj oj;	<span style="color:#75715e">//B��n�ι���+n��������ͨ��B��A����Чһ�㣬���ǣ���ֵ�ȹ���+�����ɱ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	oj <span style="color:#f92672">=</span> i;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>Ӻʽĳ֡ӳȲƳЧʡ</li>
</ul>
<h2 id="27תͷ">27תͶ</h2>
<ul>
<li>c++ תʽ :</li>
</ul>
<p>const_cast<!-- raw HTML omitted -->(expression)|dynamic_cast<!-- raw HTML omitted -->(expression)|reinterpret_cast<!-- raw HTML omitted -->(expression)|static_cast<!-- raw HTML omitted -->(expression)
&mdash;-|
const  non-const ת|ʱȫת|ִеͼת|ȥ const  non-const תһת</p>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ԣתͣرעЧʵĴб dynamic_cast</li>
<li>תǱҪģŽĳ󡣿ͻԵøúҪתͷŵԼĴڡ</li>
<li>ʹ C++-style (ʽ) תͣҪʹþʽת͡ǰױʶҲȽŷűִơ</li>
</ul>
<h2 id="28-handles-ڲɷ">28ⷵ handles ָڲɷ</h2>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li> handles ( referencesָ롢)ָڲӷװԣ const ԱΪ const&quot;&quot;(dangling handles) ܽ͡</li>
</ul>
<blockquote>
<p>ƣʹѾٵĶáָ</p>
</blockquote>
<h2 id="29ϊ쳣ȫŭõ">29Ϊ&quot;쳣ȫ&quot;Ŭֵõ</h2>
<ul>
<li>쳣ȫ</li>
</ul>
<blockquote>
<ol>
<li>쳣׳ʱй©κԴ</li>
<li>쳣׳ʱݰܻ</li>
</ol>
</blockquote>
<ul>
<li>쳣ȫṩֲ֤ͬ</li>
</ul>
<p>֤|ǿұ֤|ױ֤
&mdash;-|
쳣׳󣬳ﱣЧ״̬Щ״̬δԤ֪|쳣׳󣬳״̬ı䣬صǰ״̬|ŵ׳쳣ԭеĹܡвӦṩ nothrow ֤</p>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>쳣ȫ (Exception-safty functions) ʹ쳣Ҳй©ԴκݽṹܻĺΪֿܵı֤͡ǿ͡쳣͡</li>
<li>&ldquo;ǿұ֤&rdquo; ܹ copy-and-swap ʵֳ&quot;ǿұ֤&quot;Ƕкʵֻ߱ʵ塣</li>
<li>ṩ &ldquo;쳣ȫ֤&rdquo; ֻ֮ͨ&quot;쳣ȫ֤&quot;еߡ</li>
</ul>
<h2 id="30-inlining-">30͸˽ inlining </h2>
<ul>
<li>inlining ڴ c++ ǱΪ</li>
<li>inline ͨһͷļУͨںСĺǰڵô滻չ壬ǿɺԡ</li>
<li>ںϴĺ inlining ͡</li>
<li>ͨ &ldquo;ָͨеĵ&rdquo; ʵʩ inlining</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li> inlining С͡ƵõĺϡʹպĵԹ̺Ͷ (binary upgradability) ףҲʹǱڵĴСʹٶ󻯡</li>
<li>ҪֻΪ function templates ͷļͽΪ inline</li>
</ul>
<h2 id="31ļıϵ">31ļıϵ</h2>
<ul>
<li>ӿʵַ롣</li>
<li>Сıʣʵͷļ㣬һ
ļڵʽǶʽ)  &ndash; Ʋ£</li>
</ul>
<blockquote>
<ol>
<li>ʹ object references  object pointers 񣬾ͲҪʹ
objects</li>
<li>ܹ class ʽ滻 class ʽ</li>
<li>ΪʽͶʽṩͬͷļ</li>
</ol>
</blockquote>
<ul>
<li>Handle classes  Interface classes ˽ӿںʵ֮ϹϵӶļıԡcompilation dependencies) </li>
</ul>
<blockquote>
<ol>
<li> Handle classes ϣԱͨ implementation pointer ȡöݡǻΪÿһηһԡ</li>
<li> Interface classesÿ virtualΪÿκøһԾ indirect jump) ɱ( 7) </li>
</ol>
</blockquote>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>֧ &quot; С &quot; һ㹹: ʽҪڶʽڴ˹ֶ Handle classes  Interface classes</li>
<li>ͷļӦ &quot; ȫҽʽ &quot; (full and declaration-only forms) ʽڡǷ漰templates á</li>
</ul>
<blockquote>
<p>̳</p>
</blockquote>
<h2 id="32ȷ-public-ģ-is-a-ϵ">32ȷ public ̳ģ is-a ϵ</h2>
<ul>
<li> C++ ̣Ҫһǣpublic inheritance (̳) ζ &ldquo;is-a&rdquo;һ) Ĺϵ</li>
<li>is-a Ψһ classes ֮ĹϵĹϵ has-a(һ)  is-implemented-in-terms-of (ĳʵֳ)</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>&ldquo;public ̳&quot;ζ is-a base classes ϵÿһһҲderived classes ϣΪÿһ derived class Ҳһ base class </li>
</ul>
<h2 id="-33ڼж"> 33ڼ̳ж</h2>
<ul>
<li>ڲƻ (ڱ) Χơ</li>
<li>ƹڲҵƺֹͣңע͡</li>
<li>derived class Ƕ base class ڡ</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>derived classes ڵƻ base classes ڵơ  public ̳´ûϣˡ</li>
<li>Ϊñڵټգʹ using ʽת forwarding functions) </li>
</ul>
<blockquote>
<p>using ʽת</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">base</span>{ <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> fun1(<span style="color:#66d9ef">int</span> x);};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">derived1</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> base
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">using</span> base<span style="color:#f92672">::</span>fun1;
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">fun1</span>();
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">derived1</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">private</span> base
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> fun1()<span style="color:#75715e">//ת������
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   {
</span></span><span style="display:flex;"><span>   	base<span style="color:#f92672">::</span>fun1();
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="-34ӿڼкʵ"> 34ֽӿڼ̳кʵּ̳</h2>
<ul>
<li>pure virtual ͻԣǱ뱻κ &quot; ̳ &quot; ľ class ڳ class ͨûж塣</li>
</ul>
<blockquote>
<p>һ pure virtual ĿΪ derived classes ֻ̳кӿڡ</p>
</blockquote>
<ul>
<li>derived classes ̳亯ӿ,  impure virtual ṩһʵִ, derived classes ܸд (override) </li>
</ul>
<blockquote>
<p>ӵ(Ǵ) impure virtual Ŀģ derived classes ̳иúĽӿںȱʡʵ֡</p>
</blockquote>
<ul>
<li> non-virtual ĿΪ derived classes ̳кĽӿڼһǿʵ֡</li>
</ul>
<p>pure virtual |simple (impure) virtual |non-virtual 
&mdash;-|
ֻ̳нӿ|̳нӿںһȱʡʵ|̳нӿںһǿʵ</p>
<ul>
<li>&quot; 80 - 20 &quot; һ͵ĳ 80% ִʱ仨 20% Ĵϡ</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ӿڼ̳кʵּ̳вͬ public ̳֮£derived classes Ǽ̳ base class Ľӿڡ</li>
<li>pure virtual ָֻӿڼ̳С</li>
<li>ӵ(Ǵ) impure virtual ָӿڼ̳мȱʡʵּ̳С</li>
<li>non-virtual ָӿڼ̳Լǿʵּ̳С</li>
</ul>
<h2 id="-35-virtual-ѡ"> 35 virtual ѡ</h2>
<ul>
<li>ͨ Non-Virtual Interface ַʵ Template Method ģʽ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Base</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> fun()<span style="color:#66d9ef">const</span><span style="color:#75715e">//����no-virtual ����Ϊ virtual �������⸲�� (wrapper)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">int</span> relval<span style="color:#f92672">=</span>dofun();
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> relval;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">int</span> dofun()<span style="color:#66d9ef">const</span>{...};
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p>ͻͨ public non-virtual Աӵ private virtual  &ndash; Ϊ non-virtual interface (NVI) ַ</p>
</blockquote>
<blockquote>
<p>derived classes ¶̳ж private virtual </p>
</blockquote>
<ul>
<li>ͨ Function Pointers ʵ Strategy ģʽ</li>
<li>ͨ ģ function &lt; T &gt;  Strategy ģʽ</li>
</ul>
<blockquote>
<p>trl1: :bindɸıɵڲ˳ͬʱһµĿɵ</p>
</blockquote>
<ul>
<li>ŵ Strategy ģʽ (ģʽ (design patterns))</li>
</ul>
<blockquote>
<p> virtual £</p>
</blockquote>
<ol>
<li>ʹ non-virtual interface (NVI) ַ Template Method ģʽһʽ public non-virtual Աׯϵͷ(private  protected) virtual </li>
<li> virtual 滻Ϊ &quot; ָԱ &ldquo; Strategy ģʽһַֽʽ</li>
<li> trl::function Ա滻 virtual ʹκοɵ(callable entity ) һǩʽҲ Strategy ģʽĳʽ</li>
<li>̳ϵڵ virtual 滻Ϊһ̳ϵڵ virtual  Strategy ģʽĴͳʵַ</li>
</ol>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>virtual  NVI ַ Strategy ģʽĶʽNVIַһʽ Template Method ģʽ</li>
<li>ܴӳԱƵ class ⲿһȱǣǳԱ޷ class  non-public Ա</li>
<li>trl::function Ϊһ㺯ָ롣Ķɽ &quot; ֮Ŀǩʽ (target signature)  &quot; пɵ(callable entities)</li>
</ul>
<h2 id="-36ж-non-virtual-"> 36¶̳ж non-virtual </h2>
<ul>
<li>derived classes Բ¶һ̳жnon-virtual ˴ָ base class ) </li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ԲҪ¶̳ж non-virtual </li>
</ul>
<h2 id="-37-жȱʡĭ"> 37: ¶̳жȱʡ(Ĭ)ֵ</h2>
<ul>
<li>ֺֻܼ̳: virtual  non-virtual </li>
<li>virtual ϵ̬(dynamically bound) ȱʡ(Ĭ)ֵȴǾ̬󶨡statically bound) </li>
</ul>
<blockquote>
<p>ν̬ static type) ڳбʱõ͡</p>
</blockquote>
<blockquote>
<p>ν̬(dynamic tvpe) ָ &quot; Ŀǰָ &ldquo;</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">base</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> set(base b <span style="color:#f92672">=</span> bs)<span style="color:#66d9ef">const</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;<span style="color:#75715e">//����Ĭ�ϲ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}<span style="color:#960050;background-color:#1e0010">��</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">derived</span><span style="color:#f92672">:</span><span style="color:#66d9ef">public</span> base
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> set(base b <span style="color:#f92672">=</span> bs)<span style="color:#66d9ef">const</span>;<span style="color:#75715e">//�������ظ�����
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">set</span>(base b <span style="color:#f92672">=</span> ds)<span style="color:#66d9ef">const</span>;<span style="color:#75715e">//Ĭ�ϲ�����һ��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">set</span>(base b)<span style="color:#66d9ef">const</span>;<span style="color:#75715e">//��̬����(baseָ�����÷���ʱ)ʱ�Ż��̳�baseĬ�ϲ�����
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//��̬����(derived��������)ʱ�����̳�Ĭ�ϲ���
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span></code></pre></div><ul>
<li>35˲ virtual ƣ֮һ NVI (non-virtual interface) ַ base class ڵһ public non-virtual  private virtual 
߿ɱ derived classes ¶塣</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ԲҪ¶һ̳жȱʡֵΪȱʡֵǾ̬󶨣 virtual һһΨһӦøдĶһһȴǶ̬󶨡</li>
</ul>
<h2 id="-38-ģ-has-a---ĳʵ-"> 38: ͨģ has-a   ĳʵֳ </h2>
<ul>
<li>(composition) ֮һֹϵĳ͵Ķں͵Ķ󣬱ֹϵ</li>
</ul>
<blockquote>
<p>(composition) ͬʣ layering (ֲ) constainment(ں) , aggregation (ۺ)  embedding (Ƕ)</p>
</blockquote>
<ul>
<li>Ӧ(appjicarion domain)ʵ(implementation domain)</li>
</ul>
<blockquote>
<ol>
<li>еĶʵ൱еĳЩ(ˡ)ĶӦ (appjicarion domain) ֡</li>
<li>򴿴ʵϸϵ˹Ʒ(绺)Щ൱ʵ</li>
<li>ϷӦڵĶ֮䣬ֳ has-a Ĺϵ; ʵǱ is-implemented-in-terms-of Ĺϵ</li>
</ol>
</blockquote>
<ul>
<li>set  list Ĺϵ is-a ϵ is-implemented-in-terms-of ϵ</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>(composition)  public ̳ȫͬ</li>
<li>Ӧ (application domain) ζ has-a (һ)ʵ(implementation domain) ζ is-implemented-in-terms-of (ĳʵֳ) </li>
</ul>
<h2 id="-39-ƕʹ-private-"> 39: Ƕʹ Private ̳</h2>
<ul>
<li>Private ̳ζ is-implemented-in-terms-of (ĳʵֳ)</li>
<li>ʹøϣҪʱʹ private ̳С</li>
<li>private ̳Ҫ &quot; һΪ derived class һΪ base class ߵ protected ɷ֣Ϊ¶һ virtual  &ldquo;</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">empty</span>{};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">sizeof</span>(empty) <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">derived</span><span style="color:#f92672">:</span><span style="color:#66d9ef">private</span> empty
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">sizeof</span>(derived)<span style="color:#f92672">==</span><span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">int</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">//������ EBO (empty base optimization; �հ׻������Ż�)��һ�㷢���ڵ�һ�̳вſ��У����̳��򲻻ᷢ����
</span></span></span></code></pre></div><blockquote>
<ul>
<li>ʵе &quot; empty &quot; classes  emptyں typedefsenums static Ա non-virtual </li>
<li>༼; empty classesںõĳԱ (ͨ typedefs) base classes unary_function  binary_functionЩ &quot; ûԶ֮ &quot; ̳ͨе classes</li>
</ul>
</blockquote>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>Private ̳ζ is-implemented-in-terms of (ĳʵֳ) ͨȸ(composition) ļ͡ǵ derived class Ҫ protected base class 
ԱҪ¶̳ж virtual ʱôǺġ</li>
<li>͸(composition) ͬprivate ̳п empty base Ż &quot; ߴС &quot; ĳ⿪߶ԣܺҪ</li>
</ul>
<h2 id="-40-ƕʹöؼ"> 40: Ƕʹöؼ̳</h2>
<ul>
<li>ؼ̳(multiple inheritanceMI)һ̳ (single inheritance; SI)</li>
<li>C++  (resolving)غõĹڿǷиȡ֮ǰC++ ȷԴ˵֮ƥ䡣ҳƥ亯żȡԡ</li>
<li>ؼ̳лᵼ¶(̳еĳԱظ)ͨ virtual ̳:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">derived</span><span style="color:#f92672">:</span><span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">public</span> base1, <span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">public</span> base2{};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ؼ̳бȵһ̳иӡܵµԣԼ virtual ̳еҪ</li>
<li>virtual ̳лӴСٶȡʼֵ) Ӷȵȵȳɱ virtual base classes κݣʵüֵ</li>
<li>ؼ̳еȷ;һ漰 &quot; public ̳ĳ Interface class &quot;  &quot; private ̳ĳЭʵֵ class &quot; ϡ</li>
</ul>
<blockquote>
<p>ߡģ뷺ͱ</p>
</blockquote>
<h2 id="-41ʽӿںͱڶ"> 41˽ʽӿںͱڶ̬</h2>
<ul>
<li>ʽӿ (explicit interfaces) ڶ̬ (runtime polymorphism) ⡣</li>
<li>Templates ͱ̵ʽӿ (implicit interfaces) ͱڶ̬ (compile-time polymorphism) Ϊ</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>classes  templates ֽ֧ӿ (interfaces) Ͷ̬ (polymorphism) </li>
<li> classes Խӿʽ(explicit), ԺǩΪġ̬ͨ virtual ڡ</li>
<li> template ԣӿʽ (implicit) Чʽ̬ͨ template ֻͺؽ (function overloading resolution ) ڱڡ</li>
</ul>
<h2 id="-42-typename-"> 42˽ typename ˫</h2>
<ul>
<li>C++ иԽ (resoive) һ״̬ template һǶ״ƣƲǸͣǡȱʡǶ״Ʋ͡</li>
</ul>
<blockquote>
<ul>
<li>template ڳֵĳ template ֮Ϊ (dependent names)</li>
<li> class ڳǶ״ǳΪǶ״ (nested dependent rame) </li>
</ul>
</blockquote>
<ul>
<li>ֻҪǶ״֮ǰùؼ typenameɸ֪Ϊ͡</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">::</span>const_iterator it();<span style="color:#75715e">//��֪������T::const_iterator Ϊ����
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>T t;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//T ��Ƕ�״�������
</span></span></span></code></pre></div><ul>
<li>typename Գ base classes list ڵǶ״֮ǰҲ mermber initialization list (Աֵ) Ϊ base class η</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">derived</span><span style="color:#f92672">:</span><span style="color:#66d9ef">public</span> base<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;::</span>nested <span style="color:#75715e">// base classes list
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">explicit</span> derived(<span style="color:#66d9ef">int</span> x)<span style="color:#f92672">:</span>base<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;::</span>nested(x)	<span style="color:#75715e">//��Ա�б���ʼ��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">typename</span>  base<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;::</span>nested temp;
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">//...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	}
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li> template ʱǰ׺ؼ class typename ɻ</li>
<li>ʹùؼ typename ʶǶ״;  base class lists ()  member initialization list (Աֵ) Ϊ base class η</li>
</ul>
<h2 id="-43ѧϰģ廯ڵ"> 43ѧϰģ廯ڵ</h2>
<ul>
<li>ģ廯 (templatized base classes )ڵĺƻᱻ derived classes ڸǡ</li>
<li>ģ汾 derived class template ʱᷢʱԽ derived class template 漰 base class template ĳԱǰ &quot; this-&gt; &quot; ָ base class template ڵĺ</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li> derived class templates ͨ &ldquo;this-&gt;&rdquo; ָ base class templates ڵĳԱƣͨһд &quot; base class ʸη &quot; ɡ</li>
</ul>
<h2 id="-44صĵ-templates"> 44޹صĴ templates</h2>
<ul>
<li>Է (commonality and variability analysis)</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>Templates ɶ classes Ͷκ template 붼ĳ͵ template ϵ</li>
<li>ģ (non-type template parameters) ɵĴͣԺ class Ա滻 template </li>
<li>Ͳ (type parameters) ɵĴͣɽͣôȫͬƱ (binary representations) ľ (instantiation types) ʵ롣</li>
</ul>
<h2 id="-45óաģм"> 45óԱģм</h2>
<ul>
<li>Դ base-derived ϵ B, D ͷֱֻĳ template岢 base-derived ϵ</li>
<li>Templates ͷͱ ( Generic Programming )</li>
<li>(generalized) copy캯</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SmartPtr</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//����copy���캯��,����ֻ֤����U����T����,��֤public�̳е���ʽת��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">//����copy���캯��������copy���캯����������Ҫ����copy��Ϊ�������Զ���copy���캯��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	SmartPtr(<span style="color:#66d9ef">const</span> SmartPtr <span style="color:#f92672">&amp;</span>sptr);<span style="color:#75715e">//��ͨcopy���캯��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> U<span style="color:#f92672">&gt;</span>		<span style="color:#75715e">//����copy���캯��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	SmartPtr(<span style="color:#66d9ef">const</span> SmartPtr<span style="color:#f92672">&lt;</span>U<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&amp;</span>other)<span style="color:#f92672">:</span>heldPtr(other.get())
</span></span><span style="display:flex;"><span>	{...}
</span></span><span style="display:flex;"><span>	T <span style="color:#f92672">*</span><span style="color:#a6e22e">get</span>()<span style="color:#66d9ef">const</span> {<span style="color:#66d9ef">return</span> heldPtr;}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	T <span style="color:#f92672">*</span>heldPtr;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ʹ member function templates (Աģ)  &quot; ɽм &quot; ĺ</li>
<li> member templates  &quot;  copy캯 &quot;  &quot;  assigmment &ldquo;㻹Ҫ copy 캯 copy assigmmenmt </li>
</ul>
<h2 id="-46ҫתʱϊģ嶨ǳա"> 46ҪתʱΪģ嶨ǳԱ</h2>
<ul>
<li> function template ʵƵдӲʽת</li>
<li>Class templates  tetmplate ʵƵ ( ֻʩ function templates ) Աܹ class template ֻʱ֪ T</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Rational</span><span style="color:#75715e">//template class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	 Rational(T numerator <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>,T denominator <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>	 T <span style="color:#a6e22e">numerator</span>()<span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span>	 T <span style="color:#a6e22e">denominator</span>()<span style="color:#66d9ef">const</span>;
</span></span><span style="display:flex;"><span>	 <span style="color:#66d9ef">friend</span> <span style="color:#66d9ef">const</span> Rational <span style="color:#66d9ef">operator</span><span style="color:#f92672">*</span>(<span style="color:#66d9ef">const</span> Rational <span style="color:#f92672">&amp;</span>lhs,<span style="color:#66d9ef">const</span> Rational <span style="color:#f92672">&amp;</span>rhs)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Rational</span>(lhs.numerator()<span style="color:#f92672">*</span>rhs.numerator(),lhs.denominator()<span style="color:#f92672">*</span>rhs.denominator());
</span></span><span style="display:flex;"><span>	}<span style="color:#75715e">//�������ⲿʱ����ֻ��ͨ������ȴ�޷�����
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	T n;<span style="color:#75715e">//����(numerator)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	T d;<span style="color:#75715e">//��ĸ(denominator)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>Ǳдһ class templateṩ֮ &quot;  template ص &quot; ֧ &quot; в֮ʽת &quot; ʱ뽫ЩΪ &quot; class template ڲ friend  &ldquo;</li>
</ul>
<h2 id="-47ʹ-traits-classes-ϣ"> 47ʹ traits classes Ϣ</h2>
<ul>
<li>STL Ҫ &quot; Ա㷨 &quot;  templates ɣԼɹ templates</li>
<li>STL  5 ֵ</li>
</ul>
<p>Input |Output |Forward |Bidirectional|Random access 
&mdash;-|
Istream_iterators|Ostream_iterators |֧linked list|STL list, set, multiset, map, multimap ĵ|vector,deque, string ĵ
|
ֻǰһζ|ֻǰһд|ǰβ|ǰƶƶ|ֵ֧˫</p>
<blockquote>
<p>is-aϵ</p>
<ul>
<li>inputoutput</li>
<li>forward : public input</li>
<li>bidirectional : public forward</li>
<li>random : public bidirectional</li>
</ul>
</blockquote>
<ul>
<li>advance(Iter, Disance)</li>
<li>Ʋʵһ traits class</li>
</ul>
<blockquote>
<ul>
<li>ȷϣȡõϢԵԣϣȡ (category) </li>
<li>ΪϢѡһ (  iterator_category) </li>
<li>ṩһ template һػ汾 ( ˵ iterator_traits) ںϣֵ֧Ϣ</li>
</ul>
</blockquote>
<ul>
<li>ʹһ traits class</li>
</ul>
<blockquote>
<ul>
<li>һغ (͹) ģ ( doadvance) ˴˼ĲֻڸԵ traits ÿʵ֮ traits ϢӦ͡</li>
<li>һƺͷ) ģ ( advance) Щ &quot; ͹ &quot;  traits class ṩϢ</li>
</ul>
</blockquote>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>Traits classes ʹ &quot; Ϣ &quot; ڱڿá  templates  &quot; templates ػ &quot; ʵ֡</li>
<li>ؼ (overloading ) traits classes пڱڶִ if&hellip;else ԡ</li>
</ul>
<h2 id="-48ʶ-template-ԫ"> 48ʶ template Ԫ</h2>
<ul>
<li>Template metaprogramming (TMPģԪ) Ǳд template-based C++ ִڱڵĹ̡</li>
<li>template metaprogram (ģԪ)  C++ дɡִ C++ ڵĳ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">//�ײ�(factorial)ģ��Ԫ����,�ݹ�ģ�����ֻ�ʵ��ѭ��
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">unsigned</span> n<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Factorial</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">enum</span>{value <span style="color:#f92672">=</span> n<span style="color:#f92672">*</span>Factorial<span style="color:#f92672">&lt;</span>n<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">&gt;::</span>value};
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Factorial</span><span style="color:#f92672">&lt;</span><span style="color:#ae81ff">0</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">enum</span>{Value <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>};
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//main.cpp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>cout<span style="color:#f92672">&lt;&lt;</span>Factorial<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">5</span><span style="color:#f92672">&gt;::</span>value<span style="color:#f92672">&lt;&lt;</span>endl;<span style="color:#75715e">//����5�Ľײ�
</span></span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>Template metaprogramming (TMPģԪ) ɽڣʵڴ͸ߵִЧʡ</li>
<li>TMP ɱ &quot; ѡ &quot; (based on combinations of policy choices) Ŀͻƴ룬ҲɶĳЩͲʺϵĴ롣</li>
</ul>
<blockquote>
<p>ڰ  new  delete</p>
</blockquote>
<h2 id="-49-new-handler-ϊ"> 49˽ new-handler Ϊ</h2>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>set_new_handler ͻָһڴ޷ʱá</li>
<li>Nothrow newһΪ޵ĹߣΪֻڴ; ̵Ĺ캯ûǿ׳쳣</li>
</ul>
<h2 id="-50-new--qelete-ĺ滻ʱ"> 50˽ new  qelete ĺ滻ʱ</h2>
<ul>
<li>ʱ &quot; ȫԵ &quot;  &quot; class ר &quot; Ϻ滻ȱʡ new  delete:</li>
</ul>
<blockquote>
<ul>
<li>Ϊ˼ô</li>
<li>Ϊռ̬ڴ֮ʹͳϢ</li>
<li>Ϊӷ͹黹ٶȡ</li>
<li>Ϊ˽ȱʡڴĿռ⿪</li>
<li>Ϊֲȱʡеķλ (suboptimal atignment) </li>
<li>Ϊ˽ضɴؼСnew  delete  &quot; placement 汾 &quot; (52) пļΪ</li>
<li>Ϊ˻÷ǴͳΪ</li>
</ul>
</blockquote>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ҪдԶ new  deleteЧܡ heap ôеԡռ heap ʹϢ</li>
</ul>
<h2 id="-51дnew--delete-ʱس"> 51дnew  delete ʱس</h2>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>OPerator new ӦںһѭгԷڴ棬޷ڴ󣬾͸õ new-handlerҲӦ 0 bytes 롣Class ר汾Ӧô &quot; ȷС(  )  &quot; </li>
<li>operator delete Ӧյ null ָʱκ¡Class ר汾Ӧô &quot; ȷС (  )  &quot; </li>
</ul>
<h2 id="52д-placement-new-ҳҫд-placement-delete">52д placement new ҲҪд placement delete</h2>
<ul>
<li> operator newܵĲһеǸ size_t֮⻹Ǹν placerment new</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;new&gt;//��׼��</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> <span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">new</span>(std: <span style="color:#f92672">:</span>size_t, <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> PMemory) <span style="color:#66d9ef">throw</span>(); <span style="color:#75715e">//������׼���ڵ�pacement new
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//�Ǳ�׼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> <span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">new</span>(std: <span style="color:#f92672">:</span>size_t, std<span style="color:#f92672">::</span>ostream <span style="color:#f92672">&amp;</span>) <span style="color:#66d9ef">throw</span>(std<span style="color:#f92672">::</span>bad_alloc);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">delete</span>(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>, std<span style="color:#f92672">::</span>ostream <span style="color:#f92672">&amp;</span>) <span style="color:#66d9ef">throw</span>();<span style="color:#75715e">//placement delete
</span></span></span></code></pre></div><ul>
<li>ȱʡ C++  global ṩʽ operator new</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">#include</span><span style="color:#75715e">&lt;new&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> <span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">new</span>(std: <span style="color:#f92672">:</span>size_t)<span style="color:#66d9ef">throw</span>();<span style="color:#75715e">//������new
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> <span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">new</span>(std: <span style="color:#f92672">:</span>size_t, <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>) <span style="color:#66d9ef">throw</span>();<span style="color:#75715e">//placement new
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> <span style="color:#66d9ef">operator</span> <span style="color:#a6e22e">new</span>(std: <span style="color:#f92672">:</span>size_t, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>nothrow_t <span style="color:#f92672">&amp;</span>) <span style="color:#66d9ef">throw</span>();<span style="color:#75715e">//nothrow new
</span></span></span></code></pre></div><ul>
<li> class κ operator newsЩ׼ʽΪʹЩƽΪֻҪ class ר汾 global 汾ɣ</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">//����׼��ʽ����һ��class�У�Ȼ���ÿͻ��̳м�using����ʽȡ�ñ�׼��ʽ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">standard</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span><span style="color:#f92672">*</span> <span style="color:#66d9ef">operator</span> <span style="color:#66d9ef">new</span>(std<span style="color:#f92672">::</span>size_t size)<span style="color:#66d9ef">throw</span>(std<span style="color:#f92672">::</span>bad_alloc)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#f92672">::</span><span style="color:#66d9ef">operator</span> <span style="color:#66d9ef">new</span>(size);<span style="color:#75715e">//�ֱ����ñ�׼��ʽ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	}
</span></span><span style="display:flex;"><span>	...
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">wiget</span><span style="color:#f92672">:</span><span style="color:#66d9ef">public</span> standard
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">using</span> standard<span style="color:#f92672">::</span><span style="color:#66d9ef">operator</span> <span style="color:#66d9ef">new</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//�����Լ���operator new
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>дһ placement operator newȷҲд˶Ӧ placerment operator deleteûĳܻᷢ΢ʱʱڴй©</li>
<li> placement new  placement deleteȷҪʶ ( ǹ )  ǵ汾</li>
</ul>
<blockquote>
<p>ھ</p>
</blockquote>
<h2 id="-53ҫľ"> 53Ҫľ</h2>
<ul>
<li>Ϣͱͬıвͬľ׼</li>
</ul>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>ԴľϢŬı ( Ͽ ) 漶ȡ &quot; κξ &quot;  </li>
<li>ҪıΪͬıԴ̬ȲͬһֲһϣԭľϢпʧ</li>
</ul>
<h2 id="-54լϥ-tr1-ڵı"> 54ԼϤ TR1 ڵı׼</h2>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>C++ ׼Ҫ STLiostreamslocales ɡ C99 ׼⡣</li>
<li>TR1 ָ ( trl: :shared_ptr) һ㻯ָ (trl: :function) hash-based ʽ (regular expressions) Լ 10֧֡</li>
<li>TR1 ֻһݹ淶Ϊ TR1 ṩĺôҪһʵһõʵԴ Boost</li>
</ul>
<h2 id="-55լϥ-boost"> 55ԼϤ Boost</h2>
<ul>
<li>Boost һ C++ ߼Ⱥ, Ҳһص C++ Ⱥ<a href="http://boost.org">boostַ</a></li>
<li>Boost Graph Library (ڱд graph ṹ)</li>
<li>Boost MPL Library (һԪ̳⣬metaprogramming library)</li>
<li>Boost ڰࣺ</li>
</ul>
<blockquote>
<ul>
<li>ַı</li>
<li></li>
<li>͸߼̡</li>
<li>ͱ (Generic programming)</li>
<li>ģԪ(Template metaprogrammingTMP)</li>
<li>ѧֵ (Math and numerics)</li>
<li>ȷ (Correctness and testing)</li>
<li>ݽṹ</li>
<li>Լ֧ (Inter-language support)</li>
<li>ڴ档</li>
<li>ȵ</li>
</ul>
</blockquote>
<blockquote>
<p><em><strong>С</strong></em></p>
</blockquote>
<ul>
<li>Boost һȺҲһվѡԴ뿪šͬŸ C++ ⿪Boost  C++ ׼аӰĽɫ</li>
<li>Boost ṩ TR1 ʵƷԼ⡣</li>
<li></li>
</ul>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
